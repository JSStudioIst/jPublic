(function(){_.VERSION="1.0.1";var root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||this||{};var ArrayProto=Array.prototype;var push=ArrayProto.push;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!="undefined"&&!exports.nodeType){if(typeof module!="undefined"&&!module.nodeType&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}var optimizeCb=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}};var shallowProperty=function(key){return function(obj){return obj==null?void 0:obj[key]}};var MAX_ARRAY_INDEX=Math.pow(2,53)-1;var getLength=shallowProperty("length");var isArrayLike=function(collection){var length=getLength(collection);return typeof length=="number"&&length>=0&&length<=MAX_ARRAY_INDEX};_.each=_.forEach=function(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj)){for(i=0,length=obj.length;i<length;i++){iteratee(obj[i],i,obj)}}else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++){iteratee(obj[keys[i]],keys[i],obj)}}return obj};_.functions=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.getUrlParam=function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)","i");var r=window.location.search.substr(1).match(reg);if(r!=null){return decodeURIComponent(r[2])}return null};_.debounce=function(fn,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)fn.apply(context,args)};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)fn.apply(context,args)}};_.throttle=function(fn,wait,scope){wait||(wait=250);var last,deferTimer;return function(){var context=scope||this;var now=Public.now(),args=arguments;if(last&&now<last+wait){clearTimeout(deferTimer);deferTimer=setTimeout(function(){last=now;fn.apply(context,args)},wait)}else{last=now;fn.apply(context,args)}}};_.runOnce=function(fn,context){var result;return function(){if(fn){result=fn.apply(context||this,arguments);fn=null}return result}};_.getRandom=function(max,min){min=arguments[1]||0;return Math.floor(Math.random()*(max-min+1)+min)};_.getFormJson=function(frm){var o={};var a=frm.serializeArray();_.each(a,function(){o[this.name]=this.value});return o};_.copyToClipboard=function(text){if(window.clipboardData&&window.clipboardData.setData){return clipboardData.setData("Text",text)}else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var textarea=document.createElement("textarea");textarea.textContent=text;textarea.style.position="fixed";document.body.appendChild(textarea);textarea.select();try{return document.execCommand("copy")}catch(ex){console.warn("复制到剪贴板异常:",ex);return false}finally{document.body.removeChild(textarea)}}};_.defineOperate=function(arr,value){var str="";var len=arr.length,i=0;while(i<len){str+=_.format("<a style='cursor: pointer;' onclick='{1}' href='javascript:;'>{0}</a>",arr[i].text,_.format(arr[i].fn,value));str+=i==len-1?"":" | ";i++}return str};_.getRootPath=function(){var curPath=window.document.location.href;var pathName=window.document.location.pathname;var pos=curPath.indexOf(pathName);var localhostPaht=curPath.substring(0,pos);var projectName=pathName.substring(0,pathName.substr(1).indexOf("/")+1);return localhostPaht+projectName};_.format=function(format){var args=Array.prototype.slice.call(arguments,1);return format.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!="undefined"?args[number]:match})};_.trim=function(str,chars){return this.ltrim(this.rtrim(str,chars),chars)};_.ltrim=function(str,chars){chars=chars||"\\s";return str.replace(new RegExp("^["+chars+"]+","g"),"")};_.rtrim=function(str,chars){chars=chars||"\\s";return str.replace(new RegExp("["+chars+"]+$","g"),"")};_.isFunction=function(obj){return typeof obj=="function"||false};_.isObject=function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj};_.isNullOrEmpty=function(str){if(null==str||typeof str=="undefined"||str==""){return true}str=_.trim(str);return str.length==0};_.isArray=function(obj){return toString.call(obj)==="[object Array]"};_.isNumeric=function(value){return!isNaN(parseFloat(value))&&isFinite(value)};_.isString=function(value){return typeof value==="string"};_.truncate=function(str,limit,suffix){if(_.isString(str)){if(typeof suffix!=="string"){suffix=""}if(str.length>limit){return str.slice(0,limit-suffix.length)+suffix}return str}};_.fmoney=function(s,n){n=n>0&&n<=20?n:2;if(typeof s=="undefined"||!s&&s!=0){return""}s=parseFloat((s+"").replace(/[^\d\.-]/g,"")).toFixed(n)+"";var ss=s.split(".");var l=ss[0],r=ss[1];ss[0]=ss[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,");return ss[0]+"."+r.substring(0,n)};_.defineColor=function(value,color){return'<span style="color:'+(color||"#FF0000")+'">'+value+"</span>"};_.now=Date.now||function(){return(new Date).valueOf()};_.serverTime=function(){var xmlHttp=new XMLHttpRequest||new ActiveXObject("Microsoft.XMLHTTP");xmlHttp.open("HEAD",location.href,false);xmlHttp.send();return new Date(xmlHttp.getResponseHeader("Date"))};_.firstDay=function(date){date||(date=new Date);return new Date(date.getFullYear(),date.getMonth(),1)};_.lastDay=function(date){date||(date=new Date);return new Date(date.getFullYear(),date.getMonth()+1,0)};_.firstMonthDay=function(date){date||(date=new Date);return new Date(date.getFullYear(),date.getMonth()-1,1)};_.lastMonthDay=function(date){date||(date=new Date);return new Date(date.getFullYear(),date.getMonth(),0)};_.firstYearDay=function(date){date||(date=new Date);return new Date(date.getFullYear(),0,1)};_.lastYearDay=function(date){date||(date=new Date);return new Date(date.getFullYear(),11,31)};_.getWeekStartDate=function(date){date||(date=new Date);return new Date(date.getFullYear(),date.getMonth(),date.getDate()-date.getDay()+1)};_.getWeekEndDate=function(date){date||(date=new Date);return new Date(date.getFullYear(),date.getMonth(),date.getDate()+7-date.getDay())};_.getLastWeekStartDate=function(date){date||(date=new Date);return new Date(date.getFullYear(),date.getMonth(),date.getDate()-date.getDay()-6)};_.getLastWeekEndDate=function(date){date||(date=new Date);return new Date(date.getFullYear(),date.getMonth(),date.getDate()-date.getDay())};_.lastYearFirstDay=function(date){date||(date=new Date);return new Date(date.getFullYear()-1,0,1)};_.lastYearLastDay=function(date){date||(date=new Date);return new Date(date.getFullYear()-1,11,31)};_.getBeforeDay=function(d){d=new Date(d);d=+d-1e3*60*60*24;d=new Date(d);var year=d.getFullYear();var mon=d.getMonth()+1;var day=d.getDate();s=year+"-"+(mon<10?"0"+mon:mon)+"-"+(day<10?"0"+day:day);return s};_.dateFormat=function(date,format){date instanceof Date||(date=new Date(date));format=format||"yyyy-MM-dd hh:mm:ss";var o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),S:date.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(date.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return format};_.shortDateFormat=function(date){if(!date){return""}return this.dateFormat(date,"yyyy-MM-dd")};_.formatTime=function(n){var hours=Math.floor(n/60/60);var minutes=Math.floor((n-hours*60*60)/60);var seconds=Math.round(n-hours*60*60-minutes*60);return hours+":"+(minutes<10?"0"+minutes:minutes)+":"+(seconds<10?"0"+seconds:seconds)};_.unformatTime=function(string){var timeArray=string.split(":"),seconds=0;if(timeArray.length===3){seconds=seconds+Number(timeArray[0])*60*60;seconds=seconds+Number(timeArray[1])*60;seconds=seconds+Number(timeArray[2])}else if(timeArray.length===2){seconds=seconds+Number(timeArray[0])*60;seconds=seconds+Number(timeArray[1])}return Number(seconds)};_.timeCompare=function(startTime,endTime){var start=new Date(startTime.replace("-","/").replace("-","/"));var end=new Date(endTime.replace("-","/").replace("-","/"));if(end<start){return false}return true};_.arrayDifference=function(a,b){var filtered=a.filter(function(e){return b.indexOf(e)===-1});return filtered};_.arrayShuffle=function(array){var copy=[],n=array.length,i;while(n){i=Math.floor(Math.random()*n--);copy.push(array.splice(i,1)[0])}return copy};_.arrayIsRepeat=function(arr){var hash={};for(var i in arr){if(hash[arr[i]]){return true}hash[arr[i]]=true}return false};_.arrayUnique=function(arr){var a=[];for(var i=0,l=arr.length;i<l;i++){if(a.indexOf(arr[i])===-1){a.push(arr[i])}}return a};_.arrayEquals=function(array,strict){if(!array)return false;if(arguments.length==1)strict=true;if(this.length!=array.length)return false;for(var i=0;i<this.length;i++){if(this[i]instanceof Array&&array[i]instanceof Array){if(!this[i].equals(array[i],strict))return false}else if(strict&&this[i]!=array[i]){return false}else if(!strict){return this.sort().equals(array.sort(),true)}}return true};_.Math={EPSILON:Math.pow(2,-52),DEFAULT_SCALE:2,add:function(x,y){var result=Number(x)+Number(y);return result},subtract:function(x,y){var result=Number(x)-Number(y);return result},multiply:function(x,y){var result=Number(x)*Number(y);return result},divide:function(x,y){var result=Number(x)/Number(y);return result},numberFormat:function(x){return this.toFixed(x)},toFixed:function(x,digits){if(typeof x=="undefined"||x===""){return""}else if(!this.isNumeric(x)){return x}digits=digits||this.DEFAULT_SCALE;x=(x+"").replace("E","e");if((x+"").indexOf("e")!=-1){return(+(Math.round(+x)+"e"+-digits)).toFixed(digits)}return(+(Math.round(+(x+"e"+digits))+"e"+-digits)).toFixed(digits)},removeExponent:function(x){if(Math.abs(x)<1){var e=parseInt(x.toString().split("e-")[1]);if(e){x*=Math.pow(10,e-1);x="0."+new Array(e).join("0")+x.toString().substring(2)}}else{var e=parseInt(x.toString().split("+")[1]);if(e>20){e-=20;x/=Math.pow(10,e);x+=new Array(e+1).join("0")}}return x},equal:function(x,y){return Math.abs(x-y)<this.EPSILON},compare:function(x,y){if(this.equal(x,y))return 0;else if(x>y)return 1;else return-1}};_.extend=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return chainResult(this,func.apply(_,args))}});return _};_.extend(_)})();